


# receive_change = {receiving_root_address:change_root_address}
# receiving_dict = {index1:address1, index2:address2, index3:address3, ...}
# change_dict = {index1:address1, index2:address2, index3:address3, ...}




'''
Example of a 3 input 2 output transaction - this is the output of querying a transaction ID on Blockchain.com

3 addresses sent BTC to 2 separate addresses. For the HD Wallet, we will have to produce N input transactions for 2 output transactions. 
Similar to below, it will all be tied up to one txid. To build a transaction, we will need something like this created. However, to 
create the transaction, we will need to 

https://www.blockchain.com/explorer/transactions/btc/81b4c832d70cb56ff957589752eb4125a4cab78a25a8fc52d6a09e5bd4404d48

In this example, since we are interested in spending the input for address 1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5, the previous transaction index 
would be 0, since it is the first entry in the "outputs" field. The index of the first output is always zero: https://developer.bitcoin.org/devguide/transactions.html   

The sum of the input values minus the sum of the output values equals the transaction fee. Thus, sum of input must always be greater than sum of output. 

{
   "hash":"81b4c832d70cb56ff957589752eb4125a4cab78a25a8fc52d6a09e5bd4404d48",
   "ver":1,
   "vin_sz":3,
   "vout_sz":2,
   "size":617,
   "weight":2468,
   "fee":20000,
   "relayed_by":"0.0.0.0",
   "lock_time":0,
   "tx_index":2543892394898388,
   "double_spend":false,
   "time":1388905258,
   "block_index":278696,
   "block_height":278696,
   "inputs":[
      {
         "sequence":4294967295,
         "witness":"",
         "script":"483045022100b2fd3f8a8c226f2addb1b663009c344e2c351dad0daf022d1cb12fe77e81563a02206e012ef6235d10ee058d4c3d61b44a8ca18ebc5e99388e6004f306b289683e02014104365c787aaf52a181a6e110f9d3daa08103f91b1512bea21398b9ea1f1beb5dae9155daad83b1dabbf316c4b6e4bb438344204a1db1d33ccb47d01c2051c0974a",
         "index":0,
         "prev_out":{
            "addr":"1MvJZhYsoF1AD1h1uXTR15d1ZhJMHGAJR8",
            "n":1,
            "script":"76a914e57739209ef9c973c325d6353c0d4803a57e8c0a88ac",
            "spending_outpoints":[
               {
                  "n":0,
                  "tx_index":2543892394898388
               }
            ],
            "spent":true,
            "tx_index":7028753188634486,
            "type":0,
            "value":10000
         }
      },
      {
         "sequence":4294967295,
         "witness":"",
         "script":"483045022100faf84d50e99deeef7d2cf9f8b4600b8de56fd788d9f66521a04378f90b49a87602204608cde776fda754ce871abff873dc4d29aa34c03a50d96085200e825bae73a40141045684d9b38346deb7f93b6b8282dcf8227bfcb72913d8f4c5fad9987e38770467fee26b5a0b57d0aef4df4002463ec1f1934640d6905eede1ed28bb7e432bcbd1",
         "index":1,
         "prev_out":{
            "addr":"1MWvGVgCmgBqxx1iJt77YJyeSfTjX6JnAC",
            "n":0,
            "script":"76a914e10b0b329a04d14ad6790c5095b29ff097f75f8288ac",
            "spending_outpoints":[
               {
                  "n":1,
                  "tx_index":2543892394898388
               }
            ],
            "spent":true,
            "tx_index":8386161717906243,
            "type":0,
            "value":91234
         }
      },
      {
         "sequence":4294967295,
         "witness":"",
         "script":"47304402206f361fb4b97aaea04f18cf9ff81a186e48ed4478379e6e93e0ab28d4d48226c902201565b73f2f03effacf429e7a840543c577347518f256dcc3def8558fa8effcef0141040dc0d62bd87d2e54be3f95c4187fa30d48d6cd00431978401dd798b74507d9adb457fd9434876f562735baef0bb9d6e35366c2c181b6d961b8362ad95af726aa",
         "index":2,
         "prev_out":{
            "addr":"1MaGwACpvR9AjDFvW9UtJshQHhZNSa6MtS",
            "n":1,
            "script":"76a914e1ad8b12d97972f7e96fa47f90abf17fd9bb87e788ac",
            "spending_outpoints":[
               {
                  "n":2,
                  "tx_index":2543892394898388
               }
            ],
            "spent":true,
            "tx_index":3314265439647671,
            "type":0,
            "value":1758645
         }
      }
   ],
   "out":[
      {
         "type":0,
         "spent":true,
         "value":101234,
         "spending_outpoints":[
            {
               "tx_index":8235250061471035,
               "n":0
            }
         ],
         "n":0,
         "tx_index":2543892394898388,
         "script":"76a914df3bd30160e6c6145baaf2c88a8844c13a00d1d588ac",
         "addr":"1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5"
      },
      {
         "type":0,
         "spent":true,
         "value":1738645,
         "spending_outpoints":[
            {
               "tx_index":215236957090673,
               "n":1
            }
         ],
         "n":1,
         "tx_index":2543892394898388,
         "script":"76a9149f036f85506693bb84c5d910d58bdcf8283b20ce88ac",
         "addr":"1FVnZDLN2c2RqnqLkySoeYD9n7BiydPhMv"
      }

''' 



'''
Sample output of the blockchain.info api endpoint for /address

Below data is a JSON file of all Transaction IDs associated with the address. 
'''

'''
{
   "hash160":"df3bd30160e6c6145baaf2c88a8844c13a00d1d5",
   "address":"1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5",
   "n_tx":4,
   "n_unredeemed":0,
   "total_received":102234,
   "total_sent":102234,
   "final_balance":0,
   "txs":[
      {  
        
        # hash refers to this specific Transaction ID associated with the address. 
        
         "hash":"f98a37132c58e038bd06398a9b49fee67e1f9816d5cb2c366fe156b175ea1556",
         "ver":2,
         "vin_sz":1,
         "vout_sz":1,
         "size":220,
         "weight":880,
         "fee":300,
         "relayed_by":"0.0.0.0",
         "lock_time":0,
         "tx_index":3028868092275420,
         "double_spend":false,
         "time":1651870495,
         "block_index":735220,
         "block_height":735220,
         "inputs":[   # inputs always refer to the address that is sending the bitcoin, regardless if it is the address being queried.  
            {
               "sequence":4294967295,
               "witness":"",
               "script":"473044022024fa13d08c176bb4ae01ebf3f4731e24a53c5f98dc481b97180355f2096cd6dd02204ba4bbf023f165d3477cb9f771036f140cbec67dc22284a8b66b09651eb3b0a601410414e301b2328f17442c0b8310d787bf3d8a404cfbd0704f135b6ad4b2d3ee751310f981926e53a6e8c39bd7d3fefd576c543cce493cbac06388f2651d1aacbfcd",
               "index":0,
               "prev_out":{
                  "addr":"1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5",
                  "n":0,
                  "script":"76a914df3bd30160e6c6145baaf2c88a8844c13a00d1d588ac",
                  "spending_outpoints":[
                     {
                        "n":0,
                        "tx_index":3028868092275420
                     }
                  ],
                  "spent":true,
                  "tx_index":5629088413271310,
                  "type":0,
                  "value":1000
               }
            }
         ],
         "out":[    # outputs always refer to the address that is receiving the bitcoin, even if it is not the address being queried. 
            {
               "type":0,
               "spent":true,
               "value":700,   # value refers to the balance of satoshis in this address. 
               "spending_outpoints":[
                  {
                     "tx_index":5337790564708960,
                     "n":49
                  }
               ],
               "n":0,
               "tx_index":3028868092275420,
               "script":"00144227c871121f4574cf547763d6d9448aa4ff740f",
               "addr":"bc1qggnusugjrazhfn65wa3adk2y32j07aq0a4k6ku"
            }
         ],
         "result":-1000,  # results refers to the amount transferred in satoshis. Negative result means BTC was transferred out of the address in question. 
                          # Balance refers to the balane of the address in question after the transaction. In this case, the address being queried has a balance 
                          # of zero satoshis after 1000 satoshis were transferred out to the listed output address. 
         "balance":0
      },
      {
         "hash":"2fe94b0e766be2e2169de0b7c904f0fde3fd587bb96eb243307228423a02fd9f",
         "ver":1,
         "vin_sz":1,
         "vout_sz":1,
         "size":192,
         "weight":768,
         "fee":1760,
         "relayed_by":"0.0.0.0",
         "lock_time":0,
         "tx_index":5629088413271310,
         "double_spend":false,
         "time":1651870495,
         "block_index":735217,
         "block_height":735217,
         "inputs":[
            {
               "sequence":4294967295,
               "witness":"",
               "script":"483045022100e3567c8d5a32e9eaf61537432c75ea5f6db7f6fd157853e3c16b3e587ae5ab7a02206572f4558f7b98336d08379a971d4b4f552c89b00fb586690e23b4be538e093d012102f6442576c7fedbcd5af4b8bf1c0919e3f3de503c9576bc7d32fbb4e7f8956aa2",
               "index":0,
               "prev_out":{
                  "addr":"14NvH8zJnvmWNJ1GwkQGSkrB9kkdj7PzPg",
                  "n":0,
                  "script":"76a914250d9644654c89ebb733edf57113c45ea0c26a8388ac",
                  "spending_outpoints":[
                     {
                        "n":0,
                        "tx_index":5629088413271310
                     }
                  ],
                  "spent":true,
                  "tx_index":1396680440609434,
                  "type":0,
                  "value":2760
               }
            }
         ],
         "out":[
            {
               "type":0,
               "spent":true,
               "value":1000,
               "spending_outpoints":[
                  {
                     "tx_index":3028868092275420,
                     "n":0
                  }
               ],
               "n":0,
               "tx_index":5629088413271310,
               "script":"76a914df3bd30160e6c6145baaf2c88a8844c13a00d1d588ac",
               "addr":"1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5"
            }
         ],
         "result":1000,
         "balance":1000
      },
      {
         "hash":"3f285f083de7c0acabd9f106a43ec42687ab0bebe2e6f0d529db696794540fea",
         "ver":1,
         "vin_sz":1,
         "vout_sz":1,
         "size":223,
         "weight":892,
         "fee":10000,
         "relayed_by":"0.0.0.0",
         "lock_time":0,
         "tx_index":8235250061471035,
         "double_spend":false,
         "time":1389075720,
         "block_index":279068,
         "block_height":279068,
         "inputs":[
            {
               "sequence":4294967295,
               "witness":"",
               "script":"47304402202cb265bf10707bf49346c3515dd3d16fc454618c58ec0a0ff448a676c54ff71302206c6624d762a1fcef4618284ead8f08678ac05b13c84235f1654e6ad168233e8201410414e301b2328f17442c0b8310d787bf3d8a404cfbd0704f135b6ad4b2d3ee751310f981926e53a6e8c39bd7d3fefd576c543cce493cbac06388f2651d1aacbfcd",
               "index":0,
               "prev_out":{
                  "addr":"1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5",
                  "n":0,
                  "script":"76a914df3bd30160e6c6145baaf2c88a8844c13a00d1d588ac",
                  "spending_outpoints":[
                     {
                        "n":0,
                        "tx_index":8235250061471035
                     }
                  ],
                  "spent":true,
                  "tx_index":2543892394898388,
                  "type":0,
                  "value":101234
               }
            }
         ],
         "out":[
            {
               "type":0,
               "spent":true,
               "value":91234,
               "spending_outpoints":[
                  {
                     "tx_index":5181401623654239,
                     "n":0
                  }
               ],
               "n":0,
               "tx_index":8235250061471035,
               "script":"76a914c8e90996c7c6080ee06284600c684ed904d14c5c88ac",
               "addr":"1KKKK6N21XKo48zWKuQKXdvSsCf95ibHFa"
            }
         ],
         "result":-101234,
         "balance":0
      },
      {
         "hash":"81b4c832d70cb56ff957589752eb4125a4cab78a25a8fc52d6a09e5bd4404d48",
         "ver":1,
         "vin_sz":3,
         "vout_sz":2,
         "size":617,
         "weight":2468,
         "fee":20000,
         "relayed_by":"0.0.0.0",
         "lock_time":0,
         "tx_index":2543892394898388,
         "double_spend":false,
         "time":1388905258,
         "block_index":278696,
         "block_height":278696,
         "inputs":[
            {
               "sequence":4294967295,
               "witness":"",
               "script":"483045022100b2fd3f8a8c226f2addb1b663009c344e2c351dad0daf022d1cb12fe77e81563a02206e012ef6235d10ee058d4c3d61b44a8ca18ebc5e99388e6004f306b289683e02014104365c787aaf52a181a6e110f9d3daa08103f91b1512bea21398b9ea1f1beb5dae9155daad83b1dabbf316c4b6e4bb438344204a1db1d33ccb47d01c2051c0974a",
               "index":0,
               "prev_out":{
                  "addr":"1MvJZhYsoF1AD1h1uXTR15d1ZhJMHGAJR8",
                  "n":1,
                  "script":"76a914e57739209ef9c973c325d6353c0d4803a57e8c0a88ac",
                  "spending_outpoints":[
                     {
                        "n":0,
                        "tx_index":2543892394898388
                     }
                  ],
                  "spent":true,
                  "tx_index":7028753188634486,
                  "type":0,
                  "value":10000
               }
            },
            {
               "sequence":4294967295,
               "witness":"",
               "script":"483045022100faf84d50e99deeef7d2cf9f8b4600b8de56fd788d9f66521a04378f90b49a87602204608cde776fda754ce871abff873dc4d29aa34c03a50d96085200e825bae73a40141045684d9b38346deb7f93b6b8282dcf8227bfcb72913d8f4c5fad9987e38770467fee26b5a0b57d0aef4df4002463ec1f1934640d6905eede1ed28bb7e432bcbd1",
               "index":1,
               "prev_out":{
                  "addr":"1MWvGVgCmgBqxx1iJt77YJyeSfTjX6JnAC",
                  "n":0,
                  "script":"76a914e10b0b329a04d14ad6790c5095b29ff097f75f8288ac",
                  "spending_outpoints":[
                     {
                        "n":1,
                        "tx_index":2543892394898388
                     }
                  ],
                  "spent":true,
                  "tx_index":8386161717906243,
                  "type":0,
                  "value":91234
               }
            },
            {
               "sequence":4294967295,
               "witness":"",
               "script":"47304402206f361fb4b97aaea04f18cf9ff81a186e48ed4478379e6e93e0ab28d4d48226c902201565b73f2f03effacf429e7a840543c577347518f256dcc3def8558fa8effcef0141040dc0d62bd87d2e54be3f95c4187fa30d48d6cd00431978401dd798b74507d9adb457fd9434876f562735baef0bb9d6e35366c2c181b6d961b8362ad95af726aa",
               "index":2,
               "prev_out":{
                  "addr":"1MaGwACpvR9AjDFvW9UtJshQHhZNSa6MtS",
                  "n":1,
                  "script":"76a914e1ad8b12d97972f7e96fa47f90abf17fd9bb87e788ac",
                  "spending_outpoints":[
                     {
                        "n":2,
                        "tx_index":2543892394898388
                     }
                  ],
                  "spent":true,
                  "tx_index":3314265439647671,
                  "type":0,
                  "value":1758645
               }
            }
         ],
         "out":[
            {
               "type":0,
               "spent":true,
               "value":101234,
               "spending_outpoints":[
                  {
                     "tx_index":8235250061471035,
                     "n":0
                  }
               ],
               "n":0,
               "tx_index":2543892394898388,
               "script":"76a914df3bd30160e6c6145baaf2c88a8844c13a00d1d588ac",
               "addr":"1MMMMSUb1piy2ufrSguNUdFmAcvqrQF8M5"
            },
            {
               "type":0,
               "spent":true,
               "value":1738645,
               "spending_outpoints":[
                  {
                     "tx_index":215236957090673,
                     "n":1
                  }
               ],
               "n":1,
               "tx_index":2543892394898388,
               "script":"76a9149f036f85506693bb84c5d910d58bdcf8283b20ce88ac",
               "addr":"1FVnZDLN2c2RqnqLkySoeYD9n7BiydPhMv"
            }
         ],
         "result":101234,
         "balance":101234
      }
   ]

'''